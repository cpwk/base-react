<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>rj164332陈鹏10</title>
</head>

<body>

<div class="mr-can">
    <div style="width:800px;height:500px;margin:auto;">
        <canvas id="canvas1" width="800px" height="500px" style="position: absolute;">您的浏览器不支持canvas!
        </canvas>
        <canvas id="canvas2" width="800px" height="500px" style="position: absolute;">您的浏览器不支持canvas!
        </canvas>
    </div>
    <input type="button" id="flyBtn" value="转起" onclick="doFly()"/>
</div>

<script>
    var t = null;
    var centerX = 400;
    var centerY = 250;
    var clx = null;
    var clx2 = null;
    var lineLen = 150;
    var myCanvas2 = null;

    window.onload = function () {
        var myCanvas = document.getElementById("canvas1");
        ctx = myCanvas.getContext("2d");
        myCanvas2 = document.getElementById("canvas2");
        ctx2 = myCanvas2.getContext("2d");
        creatCircle2();
        creatCircle1();
        creatCircle3();
        createCirText();
        createpics();
        ctx2.translate(centerX, centerY);
        ininPoint();
    }

    function creatCircle1() {
        var color = ["rgba(209,66,120,0.6)",
            "rgba(149,63,174,0.6)",
            "rgba(88,104,55,0.6)",
            "rgba(199,199,111,0.6)",
            "rgba(175,39,41,0.6)",
            "rgba(58,156,118,0.6)",
            "rgba(204,165,64,0.6)",
            "rgba(89,152,254,0.6)",
            "rgba(82,219,83,0.6)",
            "rgba(82,219,83,0.6)"];
        var startAngle = 0;
        var endAngle = 0;
        for (var i = 0; i < 10; i++) {
            ctx.save();
            ctx.beginPath();
            startAngle = Math.PI * (2 / 10) * i;
            endAngle = Math.PI * (2 / 10) * (i + 1);
            ctx.arc(centerX, centerY, 155, startAngle, endAngle, false);
            ctx.lineWidth = 180.0;
            ctx.strokeStyle = color[i];
            ctx.stroke();
            ctx.restore();
        }
    }

    function creatCircle2() {
        var color = ["rgab(209,66,120,0.6)",
            "rgba(149,63,174,0.6)",
            "rgba(88,104,55,0.6)",
            "rgba(199,199,111,0.6)",
            "rgba(175,39,41,0.6)",
            "rgba(58,156,118,0.6)",
            "rgba(204,165,64,0.6)",
            "rgba(89,152,254,0.6)",
            "rgba(82,219,83,0.6)",
            "rgba(254,184,52,0.6)"];
        var startAngle = 0;
        var endAngle = 0;
        for (var i = 0; i < 10; i++) {
            ctx.save();
            ctx.beginPath();
            startAngle = Math.PI * (2 / 10) * i;
            endAngle = Math.PI * (2 / 10) * (i + 1);
            ctx.arc(centerX, centerY, 150, startAngle, endAngle, false);
            ctx.lineWidth = 160.0;
            ctx.strokeStyle = color[i];
            ctx.stroke();
            ctx.restore();
        }
    }

    function creatCircle3() {
        var color = ["rgba(209,66,120,0.6)",
            "rgba(149,63,174,0.6)",
            "rgba(88,104,55,0.6)",
            "rgba(199,199,111,0.6)",
            "rgba(175,39,41,0.6)",
            "rgba(58,156,118,0.6)",
            "rgba(204,165,64,0.6)",
            "rgba(89,152,254,0.6)",
            "rgba(82,219,83,0.6)",
            "rgba(254,184,52,0.6)"];
        var startAngle = 0;
        var endAngle = 0;
        for (var i = 0; i < 10; i++) {
            ctx.save();
            ctx.beginPath();
            startAngle = Math.PI * (2 / 10) * i;
            endAngle = Math.PI * (2 / 10) * (i + 1);
            ctx.arc(centerX, centerY, 55, startAngle, endAngle, false)
            ctx.lineWidth = 150.0;
            ctx.strokeStyle = color[i];
            ctx.stroke();
            ctx.restore();
        }
    }

    function createpics() {
        var images = new Image();
        images.src = "#";
        images.onload = function () {
            ctx.drawImage(images, centerX - 75, centerY - 75, 150, 150)
            ctx.restore();
        }
    }

    function createCirText() {
        var info = ["一等奖电脑", "谢谢参与", "二等奖手机", "谢谢参与", "谢谢参与", "三等奖耳机", "谢谢参与",
            "谢谢参与", "谢谢参与", "谢谢参与"];
        ctx.font = "Bold 20px Arial";
        ctx.textAlign = 'start';
        ctx.textBaseline = 'middle';
        ctx.fillStyle = "#000";
        var step = 2 * Math.PI / 10;
        for (var i = 0; i < 10; i++) {
            ctx.save();
            ctx.beginPath();
            ctx.translate(centerX, centerY);
            ctx.rotate(i * step + step / 2);
            ctx.fillText(info[i], 130, 0);
            ctx.restore();
        }
    }

    function ininPoint() {
        ctx2.beginPath();
        ctx2.moveTo(0, 2);
        ctx2.lineTo(lineLen, 2);
        ctx2.lineTo(lineLen, 4);
        ctx2.lineTo(lineLen + 10, 0);
        ctx2.lineTo(lineLen, -4);
        ctx2.lineTo(lineLen, -2);
        ctx2.lineTo(0, -2);
        ctx2.fillStyle = "#C01020";
        ctx2.fill();
        ctx2.closePath();
    }

    function doFly() {
        myCanvas2.width = 800;
        ctx2.translate(centerX, centerY);
        if (t) {
            return;
        }
        var step = 50 + Math.random() * 10;
        var angle = 0;
        t = setInterval(function () {
            step *= 0.95;
            if (step <= 0.1) {
                clearInterval(t);
                t = null;
            } else {
                ctx2.restore();
                ctx2.save();
                ctx2.rotate(angle * Math.PI / 180);
                ctx2.clearRect(-5, -5, 170, 18);
                angle += step;
                if (angle > 360) {
                    angle -= 360;
                }
                ctx2.restore();
                ctx2.save();
                ctx2.rotate(angle * Math.PI / 180);
                ininPoint();
            }
        }, 60);
    }

</script>

</body>

</html>
